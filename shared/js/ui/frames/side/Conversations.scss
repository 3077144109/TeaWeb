@import "../../../../css/static/mixin";
@import "../../../../css/static/properties";

$color_client_normal: #cccccc;
$client_info_avatar_size: 10em;
$bot_thumbnail_width: 16em;
$bot_thumbnail_height: 9em;

.panel {
    display: flex;
    flex-direction: column;
    justify-content: stretch;

    height: 100%;
    width: 100%;

    position: relative;

    .containerMessages {
        flex-grow: 1;
        flex-shrink: 1;

        display: flex;
        flex-direction: column;
        justify-content: stretch;

        min-height: 2em;

        position: relative;

        .containerScrollNewMessage {
            flex-grow: 0;
            flex-shrink: 0;

            position: absolute;
            bottom: 0;
            right: 0;
            left: 0;

            display: block;
            text-align: center;

            width: 100%;
            color: #8b8b8b;

            background: #353535; /* if we dont support gradients */
            background: linear-gradient(rgba(53, 53, 53, 0) 10%, #353535 70%);
            pointer-events: none;

            opacity: 0;
            @include transition(opacity .25s ease-in-out);
            &.shown {
                cursor: pointer;
                pointer-events: all;

                opacity: 1;
                @include transition(opacity .25s ease-in-out);
            }
        }
    }
}

.messages {
    flex-grow: 1;
    flex-shrink: 1;

    display: block;

    overflow-y: auto;
    overflow-x: hidden;
    @include chat-scrollbar();

    position: relative;
    min-height: 2em;
    margin-bottom: .5em;
    margin-right: .5em;

    .containerMessage {
        flex-shrink: 0;
        flex-grow: 0;

        display: flex;
        flex-direction: row;
        justify-content: stretch;

        .avatar {
            flex-grow: 0;
            flex-shrink: 0;

            position: relative;

            display: inline-block;
            margin: 1em 1em .5em .5em;

            .imageContainer {
                overflow: hidden;

                width: 2.5em;
                height: 2.5em;

                border-radius: 50%;
            }
        }

        .message {
            flex-grow: 0;
            flex-shrink: 1;

            min-width: 2em;

            position: relative;

            display: inline-flex;
            flex-direction: column;
            justify-content: flex-start;

            @include user-select(text);

            background: #303030;
            border-radius: 6px 6px 6px 6px;

            margin-top: .5em;
            padding: .5em;

            .info {
                display: block;

                white-space : nowrap;
                overflow : hidden;
                text-overflow: ellipsis;

                .sender, .sender :global(.htmltag-client) {
                    display: inline;

                    font-weight: bold;
                    color: $color_client_normal;
                }

                .timestamp {
                    display: inline;
                    margin-left: .5em;

                    font-size: 0.66em;
                    color: #5d5b5b;
                }

                .delete {
                    width: 1.1em;
                    cursor: pointer;

                    display: inline-block;
                    align-self: auto;

                    opacity: .25;

                    > img {
                        vertical-align: text-top;
                    }

                    &:hover {
                        opacity: 1;
                    }

                    @include transform(opacity $button_hover_animation_time ease-in-out);
                }
            }

            .text {
                color: #b5b5b5;
                line-height: 1.1em;

                word-wrap: break-word;

                :global(.htmltag-client), :global(.htmltag-channel) {
                    display: inline;

                    font-weight: bold;
                    color: $color_client_normal;
                }
            }

            &:before {
                position: absolute;

                content: ' ';

                width: 1em;
                height: 1em;

                margin-left: calc(-.5em - 1em);
                border-top: .5em solid transparent;
                border-right: .75em solid #303030;
                border-bottom: .5em solid transparent;

                top: 1.25em;
            }
        }
    }

    .containerTimestamp {
        color: #565353;
        text-align: center;
    }

    .overlay {
        flex-grow: 0;
        flex-shrink: 0;

        position: absolute;

        top: 0;
        bottom: 0;
        right: 0;
        left: 0;

        text-align: center;

        width: 100%;
        color: #5a5a5a;
        background: #353535;

        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .containerUnread {
        text-align: center;
        color: #bc1515;
    }
}